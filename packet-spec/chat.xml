<?xml version="1.0" encoding="UTF-8" ?>
<packets module="chat">
    <enum name="ChatSource" type="u8">
        <variation name="All" value="1" />
        <variation name="AllGm" value="3" />
        <variation name="NPC" value="13" />
        <variation name="PrivateMessage" value="2">
            <attribute name="receiver" type="String" />
        </variation>
        <variation name="Party" value="4" />
        <variation name="Guild" value="5" />
        <variation name="Global" value="6" />
        <variation name="Stall" value="9" />
        <variation name="Union" value="11" />
        <variation name="Academy" value="16" />
        <variation name="Notice" value="7" />
    </enum>

    <enum name="ChatMessageResult" type="u8">
        <variation name="Success" value="1" />
        <variation name="Error" value="2">
            <attribute name="code" type="u16" />
        </variation>
    </enum>

    <packet name="TextCharacterInitialization" source="server" opcode="0x3535">
        <attribute name="characters" type="Vec" inner="u64" list-type="length" />
    </packet>

    <packet name="ChatUpdate" source="server" opcode="0x3026">
        <attribute name="source" type="ChatSource" />
        <attribute name="message" type="String" size="2" />
    </packet>

    <packet name="ChatMessage" source="client" opcode="0x7025">
        <attribute name="target" type="ChatSource" />
        <attribute name="index" type="u8" />
        <attribute name="unknown_2" type="u16" />
        <attribute name="message" type="String" size="2" />
    </packet>

    <packet name="ChatMessageResponse" source="server" opcode="0xB025">
        <attribute name="result" type="ChatMessageResult" />
        <attribute name="source" type="ChatSource" />
        <attribute name="index" type="u8" />
    </packet>
</packets>