<?xml version="1.0" encoding="UTF-8" ?>
<packets module="character">
    <enum name="CharacterListAction" type="u8">
        <variation name="Create" value="1" />
        <variation name="List" value="2" />
        <variation name="Delete" value="3" />
        <variation name="CheckName" value="4" />
        <variation name="Restore" value="5" />
        <variation name="ShowJobSpread" value="9" />
        <variation name="AssignJob" value="0x10" />
    </enum>

    <enum name="CharacterListError" type="u16">
        <variation name="CloudntCreateCharacter" value="0x403" />
        <variation name="WeaponRequired" value="0x404" />
        <variation name="TooManyCharacters" value="0x405" />
        <variation name="NameTooLong" value="0x40C" />
        <variation name="InvalidName" value="0x40D" />
        <variation name="NameAlreadyUsed" value="0x410" />
        <variation name="ConnectionOverlay" value="0x411" />
        <variation name="ReachedCapacity" value="0x414" />
    </enum>

    <enum name="CharacterListContent">
        <variation name="Characters">
            <attribute name="characters" type="Vec" inner="CharacterListEntry" list-type="length" />
            <attribute name="job" type="u8" />
        </variation>
        <variation name="Empty" />
        <variation name="JobSpread">
            <attribute name="hunters" type="u8" />
            <attribute name="thieves" type="u8" />
        </variation>
    </enum>

    <enum name="CharacterListResult" type="u8">
        <variation name="Ok" value="1">
            <attribute name="content" type="CharacterListContent" />
        </variation>
        <variation name="Error" value="2">
            <attribute name="error" type="CharacterListError" />
        </variation>
    </enum>

    <enum name="CharacterListRequestAction" type="u8">
        <variation name="Create" value="1">
            <attribute name="character_name" type="String" />
            <attribute name="ref_id" type="u32" />
            <attribute name="scale" type="u8" />
            <attribute name="chest" type="u32" />
            <attribute name="pants" type="u32" />
            <attribute name="boots" type="u32" />
            <attribute name="weapon" type="u32" />
        </variation>
        <variation name="List" value="2" />
        <variation name="Delete" value="3">
            <attribute name="character_name" type="String" />
        </variation>
        <variation name="CheckName" value="4">
            <attribute name="character_name" type="String" />
        </variation>
        <variation name="Restore" value="5">
            <attribute name="character_name" type="String" />
        </variation>
        <variation name="ShowJobSpread" value="9" />
        <variation name="AssignJob" value="0x10">
            <attribute name="job" type="u8" />
        </variation>
    </enum>

    <enum name="CharacterJoinResult" type="u8">
        <variation name="Success" value="1" />
        <variation name="Error" value="2">
            <attribute name="error" type="CharacterListError" />
        </variation>
    </enum>

    <struct name="CharacterListEquippedItem">
        <attribute name="id" type="u32" />
        <attribute name="upgrade_level" type="u8" />
    </struct>

    <struct name="CharacterListAvatarItem">
        <attribute name="id" type="u32" />
    </struct>

    <struct name="CharacterListEntry">
        <attribute name="ref_id" type="u32" />
        <attribute name="name" type="String" />
        <attribute name="unknown_1" type="u8" value="0" />
        <attribute name="unknown_2" type="u8" value="0" />
        <attribute name="scale" type="u8" />
        <attribute name="level" type="u8" />
        <attribute name="exp" type="u64" />
        <attribute name="strength" type="u16" />
        <attribute name="intelligence" type="u16" />
        <attribute name="stat_points" type="u16" />
        <attribute name="sp" type="u32" />
        <attribute name="hp" type="u32" />
        <attribute name="mp" type="u32" />
        <attribute name="region" type="u16" />
        <attribute name="remaining_deletion_time" type="Option" inner="u32" />
        <attribute name="last_logout" type="u32" />
        <attribute name="guild_member_class" type="u8" />
        <attribute name="guild_rename_required" type="Option" inner="String" />
        <attribute name="academy_member_class" type="u8" />
        <attribute name="equipped_items" type="Vec" inner="CharacterListEquippedItem" list-type="length" />
        <attribute name="avatar_items" type="Vec" inner="CharacterListAvatarItem" list-type="length" />
    </struct>

    <packet name="CharacterListResponse" source="server" opcode="0xB007">
        <attribute name="action" type="CharacterListAction" />
        <attribute name="result" type="CharacterListResult" />
    </packet>

    <packet name="CharacterListRequest" source="client" opcode="0x7007">
        <attribute name="action" type="CharacterListRequestAction" />
    </packet>

    <packet name="CharacterJoinRequest" source="client" opcode="0x7001">
        <attribute name="character_name" type="String" />
    </packet>

    <packet name="CharacterJoinResponse" source="server" opcode="0xB001">
        <attribute name="result" type="CharacterJoinResult" />
    </packet>

    <packet name="CharacterStatsMessage" source="server" opcode="0x303D">
        <attribute name="phys_attack_min" type="u32" />
        <attribute name="phys_attack_max" type="u32" />
        <attribute name="mag_attack_min" type="u32" />
        <attribute name="mag_attack_max" type="u32" />
        <attribute name="phys_defense" type="u16" />
        <attribute name="mag_defense" type="u16" />
        <attribute name="hit_rate" type="u16" />
        <attribute name="parry_rate" type="u16" />
        <attribute name="max_hp" type="u32" />
        <attribute name="max_mp" type="u32" />
        <attribute name="strength" type="u16" />
        <attribute name="intelligence" type="u16" />
    </packet>

    <packet name="UnknownPacket" source="server" opcode="0x3601">
        <attribute name="unknown_2" type="u32" value="4" />
        <attribute name="unknown_1" type="u8" value="0" />
    </packet>

    <packet name="UnknownPacket2" source="server" opcode="0xB602">
        <attribute name="unknown_1" type="u8" value="1" />
        <attribute name="id" type="u32" />
        <attribute name="unknown_2" type="u32" value="0" />
    </packet>

    <packet name="FinishLoading" source="client" opcode="0x34c6" />
</packets>